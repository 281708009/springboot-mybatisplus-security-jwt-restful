(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47311930"],{"11e9":function(e,t,n){var i=n("52a7"),r=n("4630"),a=n("6821"),l=n("6a99"),s=n("69a8"),o=n("c69a"),c=Object.getOwnPropertyDescriptor;t.f=n("9e1e")?c:function(e,t){if(e=a(e),t=l(t,!0),o)try{return c(e,t)}catch(n){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},"454f":function(e,t,n){n("46a7");var i=n("584a").Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},"456d":function(e,t,n){var i=n("4bf8"),r=n("0d58");n("5eda")("keys",(function(){return function(e){return r(i(e))}}))},"46a7":function(e,t,n){var i=n("63b6");i(i.S+i.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"5eda":function(e,t,n){var i=n("5ca1"),r=n("8378"),a=n("79e5");e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],l={};l[e]=t(n),i(i.S+i.F*a((function(){n(1)})),"Object",l)}},6347:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{staticClass:"reduce-height-element",staticStyle:{"box-sizing":"border-box"},attrs:{inline:!0}},[n("el-form-item",{staticStyle:{"margin-left":"10px"},attrs:{label:"分类："}},[n("el-select",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:e.inquires.resultTypeId,callback:function(t){e.$set(e.inquires,"resultTypeId",t)},expression:"inquires.resultTypeId"}},e._l(e.resultTypeOptions,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("el-form-item",{staticStyle:{"margin-left":"10px"},attrs:{label:"时间段："}},[n("el-date-picker",{staticStyle:{width:"300px"},attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.selectionTime},model:{value:e.timeQuantum,callback:function(t){e.timeQuantum=t},expression:"timeQuantum"}})],1),n("el-form-item",{staticStyle:{"margin-left":"10px"},attrs:{label:"主要问题："}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"small"},model:{value:e.inquires.content,callback:function(t){e.$set(e.inquires,"content",t)},expression:"inquires.content"}})],1),n("el-form-item",{staticStyle:{"margin-left":"10px"},attrs:{label:"被反映人："}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"small"},model:{value:e.inquires.defendantName,callback:function(t){e.$set(e.inquires,"defendantName",t)},expression:"inquires.defendantName"}})],1),n("el-form-item",{staticStyle:{"margin-left":"10px"}},[n("el-button",{staticClass:"custom-button-in-toolbar",attrs:{type:"primary",size:"small",plain:""},on:{click:e.inquire}},[e._v("查询")])],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{height:e.tableAutoHeight,data:e.tableData,border:"",stripe:"","header-cell-class-name":"custom-header-cell"}},[n("el-table-column",{attrs:{label:"序号",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.$index+(e.inquires.pageIndex-1)*e.inquires.pageSize+1)+" ")])]}}])}),n("el-table-column",{attrs:{prop:"id",width:"120",sortable:"",align:"center",label:"线索编码"}}),n("el-table-column",{attrs:{align:"center",prop:"receptionTime",width:"120",sortable:"",label:"受理时间"}}),n("el-table-column",{attrs:{prop:"allLetDefendants",align:"center","min-width":"240",sortable:"",label:"被反映人信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.letDefendantList.length>0?n("table",{staticStyle:{"table-layout":"fixed",width:"100%","border-collapse":"collapse"}},e._l(t.row.letDefendantList,(function(t){return n("tr",[n("td",{staticClass:"is-center",staticStyle:{border:"1px solid #ddd",width:"30%"}},[n("div",[e._v(e._s(t.name))])]),n("td",{staticClass:"is-center",staticStyle:{border:"1px solid #ddd",width:"70%"}},[n("div",[e._v(e._s(t.companyName))])])])})),0):e._e(),0===t.row.letDefendantList.length?n("div",{staticStyle:{color:"#ccc"}},[e._v("无被反映人")]):e._e()]}}])}),n("el-table-column",{attrs:{prop:"content",align:"center","min-width":"240",sortable:"",label:"反应的主要问题"}}),n("el-table-column",{attrs:{prop:"resultTypeName",width:"110",align:"center",sortable:"",label:"处理类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{staticStyle:{"margin-left":"2px"},attrs:{type:e.letClueTagColor(t.row.resultTypeName),size:"mini"}},[e._v(" "+e._s(null===t.row.resultTypeName?"未分类":t.row.resultTypeName))])]}}])}),n("el-table-column",{attrs:{align:"center",fixed:"right",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.letClueIsEditable(t.row.resultTypeId)?n("el-button",{staticClass:"custom-button-in-table",attrs:{type:"warning",size:"mini",plain:"",icon:"el-icon-edit"},on:{click:function(n){return e.modifyType(t.$index,t.row)}}},[e._v("分类\n        ")]):e._e(),n("el-button",{staticClass:"custom-button-in-table",attrs:{type:"primary",size:"mini",plain:"",icon:e.letClueIsEditable(t.row.resultTypeId)?"el-icon-edit":"el-icon-view"},on:{click:function(n){return e.handleExamine(t.$index,t.row)}}},[e._v(e._s(e.letClueIsEditable(t.row.resultTypeId)?"修改":"查看")+"\n        ")]),e.letClueIsEditable(t.row.resultTypeId)?n("el-button",{staticClass:"custom-button-in-table",attrs:{type:"danger",size:"mini",plain:"",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除\n        ")]):e._e()]}}])})],1),n("el-pagination",{ref:"pagination",staticClass:"reduce-height-element",staticStyle:{"text-align":"center","box-sizing":"border-box"},attrs:{"current-page":e.inquires.pageIndex,"page-size":e.inquires.pageSize,"page-sizes":[10,20,30,40,50,100,200,300,400,500],layout:"total, sizes, prev, pager, next, jumper",total:e.totalNumber},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.inquires,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.inquires,"pageIndex",t)}}}),n("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.titleName,width:"840px",visible:e.dialogFormVisible},on:{closed:function(t){return e.letterClueFormDialogClosedHandler()},"update:visible":function(t){e.dialogFormVisible=t}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.IsLoading,expression:"IsLoading"}]},[n("LetterClue",{ref:"LetterClueForm",on:{finishAddOrUpdate:e.fetchDataAfterOperation}})],1)]),n("el-dialog",{attrs:{"close-on-click-modal":!1,title:"处理类型修改",width:"30%",visible:e.processingTypeDialog},on:{"update:visible":function(t){e.processingTypeDialog=t}}},[n("el-form",{attrs:{inline:!0,"label-width":"80px",size:"mini"}},[n("el-form-item",{attrs:{label:"处理类型"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.processingType,callback:function(t){e.processingType=t},expression:"processingType"}},e._l(e.typeOptions,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.submitProcessingType}},[e._v("确 定")])],1)],1)],1)},r=[],a=(n("7f7f"),n("d1bb")),l=n("b207"),s=n("25dd"),o=n("9873"),c=n("3a9b"),d=n("d6e5"),u={mixins:[d["a"]],name:"letterClueClassify",data:function(){return{Img:a["a"],titleName:"",IsLoading:!1,processingType:"",totalNumber:1,rowId:"",changeInfo:{},dialogFormVisible:!1,processingTypeDialog:!1,tableData:[],threadOptions:[],rankOptions:[],cadreOptions:[],involvedFieldOptions:[],unlawfulActOptions:[],typeOptions:[],dicIllegalBehavior:[],dicAreaInvolved:[],jobTypeName:[],dicSources:[],submitType:!0,changeType:!0,resultTypeOptions:[],timeQuantum:"",inquires:{pageIndex:1,pageSize:50}}},components:{LetterClue:c["default"]},created:function(){var e=this;this.fetchData(),l["a"].getDictionary({listUrl:"/dic/resulttype/all",isDelete:!1}).then((function(t){var n=t.data;e.resultTypeOptions=n.data.dicCommonList})),l["a"].getDictionary({listUrl:"/dic/source/all",isDelete:!1}).then((function(t){var n=t.data;e.threadOptions=n.data.dicCommonList})),l["a"].getDictionary({listUrl:"/dic/jobrank/all",isDelete:!1}).then((function(t){var n=t.data;e.rankOptions=n.data.dicCommonList})),l["a"].getDictionary({listUrl:"/dic/jobtype/all",isDelete:!1}).then((function(t){var n=t.data;e.cadreOptions=n.data.dicCommonList})),l["a"].getDictionary({listUrl:"/dic/areainvolved/all",isDelete:!1}).then((function(t){var n=t.data;e.involvedFieldOptions=n.data.dicCommonList})),l["a"].getDictionary({listUrl:"/dic/illegalbehavior/all",isDelete:!1}).then((function(t){var n=t.data;e.unlawfulActOptions=n.data.dicCommonList}))},methods:{fetchDataAfterOperation:function(e){e&&this.fetchData()},selectionTime:function(e){null===e?(this.inquires.startTime="",this.inquires.endTime=""):(this.inquires.startTime=e[0],this.inquires.endTime=e[1])},inquire:function(){""===this.inquires.resultTypeId&&(this.inquires.resultTypeId=void 0),""===this.inquires.content&&(this.inquires.content=void 0),""===this.inquires.name&&(this.inquires.name=void 0),""===this.inquires.startTime&&(this.inquires.startTime=void 0),""===this.inquires.endTime&&(this.inquires.endTime=void 0),this.fetchData()},handleSizeChange:function(e){this.inquires.pageSize=e,this.fetchData()},handleCurrentChange:function(e){this.inquires.pageIndex=e,this.fetchData()},fetchData:function(){var e=this;s["a"].getLetClueList(this.inquires).then((function(t){var n=t.data;e.tableData=n.data.list,e.totalNumber=n.data.total}))},handleExamine:function(e,t){var n=this;s["a"].getLetClueOne({id:t.id}).then((function(e){var i=e.data;n.changeInfo={isCreate:!1,canEdit:n.letClueIsEditable(t.resultTypeId),letClueForm:i.data},n.dialogFormVisible=!0,n.$nextTick((function(){n.$refs.LetterClueForm.iniFormDataForEdit(n.changeInfo,n.canEdit)}))}))},handleDelete:function(e,t){var n=this;this.$confirm("此操作将永久删除该信访表单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s["a"].deleteLetClue({id:t.id}).then((function(e){var t=e.data;Object(o["a"])(t),t.result&&n.fetchData()}))}))},modifyType:function(e,t){var n=this;l["a"].getDictionary({listUrl:"/dic/resulttype/all",isDelete:!1}).then((function(e){var t=e.data;n.typeOptions=t.data.dicCommonList,n.processingTypeDialog=!0})),this.rowId=t.id},submitProcessingType:function(){var e=this;s["a"].updateResultType({id:this.rowId,resultTypeId:this.processingType}).then((function(t){var n=t.data;Object(o["a"])(n),n.result&&(e.processingTypeDialog=!1,e.fetchData())}))},letterClueFormDialogClosedHandler:function(){this.$refs.LetterClueForm.clearDialogForm()},letClueTagColor:function(e){switch(e){case"未分类":case"":case null:return"info";case"案管":return"success";case"驳回":return"danger";default:return""}},letClueIsEditable:function(e){switch(e){case 0:case 4:case null:return!0;default:return!1}}}},p=u,m=(n("da89"),n("2877")),f=Object(m["a"])(p,i,r,!1,null,"20a2e1ef",null);t["default"]=f.exports},"7f59":function(e,t,n){e.exports=n.p+"static/img/userAvatar.f4734cdb.png"},"85f2":function(e,t,n){e.exports=n("454f")},"8e6e":function(e,t,n){var i=n("5ca1"),r=n("990b"),a=n("6821"),l=n("11e9"),s=n("f1ae");i(i.S,"Object",{getOwnPropertyDescriptors:function(e){var t,n,i=a(e),o=l.f,c=r(i),d={},u=0;while(c.length>u)n=o(i,t=c[u++]),void 0!==n&&s(d,t,n);return d}})},9093:function(e,t,n){var i=n("ce10"),r=n("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},"990b":function(e,t,n){var i=n("9093"),r=n("2621"),a=n("cb7c"),l=n("7726").Reflect;e.exports=l&&l.ownKeys||function(e){var t=i.f(a(e)),n=r.f;return n?t.concat(n(e)):t}},bd17:function(e,t,n){var i=n("fbd9");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("499e").default;r("3a7f5c8e",i,!0,{sourceMap:!0,shadowMode:!1})},bd86:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("85f2"),r=n.n(i);function a(e,t,n){return t in e?r()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},d1bb:function(e,t,n){"use strict";var i=n("7f59"),r=n.n(i);t["a"]={UserAvatar:r.a}},d6e5:function(e,t,n){"use strict";n("8e6e"),n("ac6a"),n("456d");var i=n("bd86"),r=n("2f62");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s={data:function(){return{tableAutoHeight:0}},created:function(){this.setTableHeight(this.contentHeight)},watch:{contentHeight:function(e){this.setTableHeight(e)},contentWidth:function(){this.setTableHeight(this.contentHeight)}},methods:{setTableHeight:function(e){var t=this;this.$nextTick((function(){for(var n=0,i=document.getElementsByClassName("reduce-height-element"),r=0;r<i.length;r++)n+=i[r].offsetHeight;t.tableAutoHeight=e-n}))}},computed:l({},Object(r["c"])({contentHeight:"layout/getContentHeight",contentWidth:"layout/getContentWidth"}))};t["a"]=s},da89:function(e,t,n){"use strict";var i=n("bd17"),r=n.n(i);r.a},f1ae:function(e,t,n){"use strict";var i=n("86cc"),r=n("4630");e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},fbd9:function(e,t,n){t=e.exports=n("24fb")(!0),t.push([e.i,"[data-v-20a2e1ef] .el-form-item{margin-bottom:0}","",{version:3,sources:["H:/WORKWORK_TEST/vue-elementui-admin-sample/src/views/content/letter/src/views/content/letter/LetterClueClassify.vue"],names:[],mappings:"AAiUA,gCACA,eACA",file:"LetterClueClassify.vue?vue&type=style&index=0&id=20a2e1ef&scoped=true&lang=css&",sourcesContent:['<template>\r\n  <div>\r\n    <el-form :inline="true"  style="box-sizing: border-box;" class="reduce-height-element">\r\n      <el-form-item label="分类：" style="margin-left: 10px;">\r\n        <el-select size="small" v-model="inquires.resultTypeId" placeholder="请选择" clearable style="width: 100px;">\r\n          <el-option v-for="item in resultTypeOptions" :key="item.id" :label="item.name" :value="item.id"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label="时间段：" style="margin-left: 10px;">\r\n        <el-date-picker size="small" v-model="timeQuantum" @change="selectionTime" style="width: 300px;" type="daterange" range-separator="至" start-placeholder="开始日期" end-placeholder="结束日期"></el-date-picker>\r\n      </el-form-item>\r\n      <el-form-item label="主要问题：" style="margin-left: 10px;">\r\n        <el-input size="small" v-model="inquires.content" style="width: 150px;"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label="被反映人：" style="margin-left: 10px;">\r\n        <el-input size="small" v-model="inquires.defendantName" style="width: 150px;"></el-input>\r\n      </el-form-item>\r\n      <el-form-item  style="margin-left: 10px;">\r\n        <el-button type="primary" size="small" plain class="custom-button-in-toolbar"  @click="inquire">查询</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <el-table :height="tableAutoHeight" :data="tableData" border stripe header-cell-class-name="custom-header-cell" style="width: 100%">\r\n      <el-table-column label="序号" align="center" width="70">\r\n        <template slot-scope="scope"><span>{{scope.$index+(inquires.pageIndex - 1) * inquires.pageSize + 1}} </span></template>\r\n      </el-table-column>\r\n      <el-table-column prop="id" width="120" sortable align="center" label="线索编码"></el-table-column>\r\n      <el-table-column align="center" prop="receptionTime" width="120" sortable label="受理时间"></el-table-column>\r\n      <el-table-column prop="allLetDefendants" align="center" min-width="240" sortable label="被反映人信息">\r\n        <template slot-scope="scope">\r\n          <table v-if="scope.row.letDefendantList.length>0" style="table-layout: fixed;width: 100%;border-collapse: collapse">\r\n            <tr v-for="letDefendant in scope.row.letDefendantList">\r\n              <td class="is-center" style="border: 1px solid #ddd;width: 30%">\r\n                <div>{{letDefendant.name}}</div>\r\n              </td>\r\n              <td class="is-center" style="border: 1px solid #ddd;width: 70%">\r\n                <div>{{letDefendant.companyName}}</div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n          <div v-if="scope.row.letDefendantList.length===0" style="color: #ccc">无被反映人</div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop="content" align="center" min-width="240" sortable label="反应的主要问题"></el-table-column>\r\n      <el-table-column prop="resultTypeName" width="110" align="center" sortable label="处理类型">\r\n        <template slot-scope="scope">\r\n          <el-tag style="margin-left: 2px" :type="letClueTagColor(scope.row.resultTypeName)" size="mini"> {{ scope.row.resultTypeName === null ? \'未分类\' : scope.row.resultTypeName }}</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align="center" fixed="right" width="200" label="操作">\r\n        <template slot-scope="scope">\r\n          <el-button type="warning" size="mini" plain class="custom-button-in-table" icon="el-icon-edit" v-if="letClueIsEditable(scope.row.resultTypeId)"\r\n                     @click="modifyType(scope.$index, scope.row)">分类\r\n          </el-button>\r\n          <el-button type="primary" size="mini" plain class="custom-button-in-table" :icon="letClueIsEditable(scope.row.resultTypeId)?\'el-icon-edit\':\'el-icon-view\'"\r\n                     @click="handleExamine(scope.$index, scope.row)">{{letClueIsEditable(scope.row.resultTypeId)? \'修改\':\'查看\'}}\r\n          </el-button>\r\n          <el-button type="danger" size="mini" plain class="custom-button-in-table" icon="el-icon-delete" v-if="letClueIsEditable(scope.row.resultTypeId)"\r\n                     @click="handleDelete(scope.$index, scope.row)">删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      style="text-align: center;box-sizing: border-box"\r\n      class="reduce-height-element"\r\n      ref="pagination"\r\n      @size-change="handleSizeChange"\r\n      @current-change="handleCurrentChange"\r\n      :current-page.sync="inquires.pageIndex"\r\n      :page-size="inquires.pageSize"\r\n      :page-sizes="[10,20,30,40,50,100, 200, 300, 400,500]"\r\n      layout="total, sizes, prev, pager, next, jumper"\r\n      :total="totalNumber">\r\n    </el-pagination>\r\n    \x3c!----------------------------查看对话框--------------------------------\x3e\r\n    <el-dialog :close-on-click-modal="false" :title="titleName" @closed="letterClueFormDialogClosedHandler()" width="840px" :visible.sync="dialogFormVisible">\r\n      <div v-loading="IsLoading">\r\n        <LetterClue ref="LetterClueForm" @finishAddOrUpdate="fetchDataAfterOperation"></LetterClue>\r\n      </div>\r\n    </el-dialog>\r\n    \x3c!----------------------------改变状态对话框--------------------------------\x3e\r\n    <el-dialog :close-on-click-modal="false"\r\n               title="处理类型修改"\r\n               width="30%"\r\n               :visible.sync="processingTypeDialog">\r\n      <el-form :inline="true" label-width="80px" size="mini">\r\n        <el-form-item label="处理类型">\r\n          <el-select v-model="processingType" clearable placeholder="请选择">\r\n            <el-option\r\n              v-for="item in typeOptions"\r\n              :key="item.id"\r\n              :label="item.name"\r\n              :value="item.id">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot="footer" class="dialog-footer">\r\n        <el-button type="primary" @click="submitProcessingType">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Img from \'src/assets/img\';\r\n  import DataDictionaryApi from \'src/api/data-dictionary-api\';\r\n  import LetterClueApi from \'src/api/letter-clue-api\';\r\n  import { showResMsg } from \'src/utils/operation-result-message\';\r\n  import LetterClue from \'./LetterClue\';\r\n  import SimpleAutoHeightTable from \'src/mixin/SimpleAutoHeightTable\';\r\n\r\n  export default {\r\n    mixins:[SimpleAutoHeightTable],\r\n    name: \'letterClueClassify\',\r\n    data() {\r\n      return {\r\n        Img,\r\n        // tagsType: true,\r\n        titleName: \'\',\r\n        IsLoading: false,\r\n\r\n        processingType: \'\',\r\n        totalNumber: 1,\r\n        rowId: \'\',\r\n        changeInfo: {},\r\n        dialogFormVisible: false,\r\n        processingTypeDialog: false,\r\n        tableData: [],\r\n        threadOptions: [],\r\n        rankOptions: [],\r\n        cadreOptions: [],\r\n        involvedFieldOptions: [],\r\n        unlawfulActOptions: [],\r\n        typeOptions: [],\r\n        dicIllegalBehavior: [],\r\n        dicAreaInvolved: [],\r\n        jobTypeName: [],\r\n        dicSources: [],\r\n        submitType: true,\r\n        changeType: true,\r\n        resultTypeOptions: [],\r\n        timeQuantum: \'\',\r\n        inquires: {\r\n          pageIndex: 1,\r\n          pageSize: 50,\r\n        },\r\n      };\r\n    },\r\n    components: {\r\n      LetterClue,\r\n    },\r\n    created() {\r\n      this.fetchData();\r\n      // 线索分类类型\r\n      DataDictionaryApi.getDictionary({ listUrl: \'/dic/resulttype/all\', isDelete: false })\r\n        .then(({ data }) => {\r\n          this.resultTypeOptions = data.data.dicCommonList;\r\n        });\r\n      // 线索来源\r\n      DataDictionaryApi.getDictionary({ listUrl: \'/dic/source/all\', isDelete: false })\r\n        .then(({ data }) => {\r\n          this.threadOptions = data.data.dicCommonList;\r\n        });\r\n      // 职级\r\n      DataDictionaryApi.getDictionary({ listUrl: \'/dic/jobrank/all\', isDelete: false })\r\n        .then(({ data }) => {\r\n          this.rankOptions = data.data.dicCommonList;\r\n        });\r\n      // 干部类型\r\n      DataDictionaryApi.getDictionary({ listUrl: \'/dic/jobtype/all\', isDelete: false })\r\n        .then(({ data }) => {\r\n          this.cadreOptions = data.data.dicCommonList;\r\n        });\r\n      // 涉及领域\r\n      DataDictionaryApi.getDictionary({ listUrl: \'/dic/areainvolved/all\', isDelete: false })\r\n        .then(({ data }) => {\r\n          this.involvedFieldOptions = data.data.dicCommonList;\r\n        });\r\n      // 违法行为\r\n      DataDictionaryApi.getDictionary({ listUrl: \'/dic/illegalbehavior/all\', isDelete: false })\r\n        .then(({ data }) => {\r\n          this.unlawfulActOptions = data.data.dicCommonList;\r\n        });\r\n    },\r\n    methods: {\r\n      fetchDataAfterOperation(result) {\r\n        if (result) {//窗口中修改成功则调用\r\n          this.fetchData();\r\n        }\r\n      },\r\n      selectionTime(data) {\r\n        if (data === null) {\r\n          this.inquires.startTime = \'\';\r\n          this.inquires.endTime = \'\';\r\n        } else {\r\n          this.inquires.startTime = data[0];\r\n          this.inquires.endTime = data[1];\r\n        }\r\n      },\r\n      inquire() {\r\n        if (this.inquires.resultTypeId === \'\') {\r\n          this.inquires.resultTypeId = undefined;\r\n        }\r\n        if (this.inquires.content === \'\') {\r\n          this.inquires.content = undefined;\r\n        }\r\n        if (this.inquires.name === \'\') {\r\n          this.inquires.name = undefined;\r\n        }\r\n        if (this.inquires.startTime === \'\') {\r\n          this.inquires.startTime = undefined;\r\n        }\r\n        if (this.inquires.endTime === \'\') {\r\n          this.inquires.endTime = undefined;\r\n        }\r\n        this.fetchData();\r\n      },\r\n      handleSizeChange(val) {\r\n        this.inquires.pageSize = val;\r\n        this.fetchData();\r\n      },\r\n      handleCurrentChange(val) {\r\n        this.inquires.pageIndex = val;\r\n        this.fetchData();\r\n      },\r\n      fetchData() {\r\n        LetterClueApi.getLetClueList(this.inquires)\r\n          .then(({ data }) => {\r\n            this.tableData = data.data.list;\r\n            this.totalNumber = data.data.total;\r\n          });\r\n      },\r\n      handleExamine(index, row) {\r\n        LetterClueApi.getLetClueOne({\r\n          id: row.id,\r\n        })\r\n          .then(({ data }) => {\r\n            this.changeInfo = {\r\n              isCreate: false,\r\n              canEdit: this.letClueIsEditable(row.resultTypeId),\r\n              letClueForm: data.data\r\n            };\r\n            this.dialogFormVisible = true;\r\n            this.$nextTick(() => {//子组件加载完后再调用其中方法\r\n              this.$refs.LetterClueForm.iniFormDataForEdit(this.changeInfo,this.canEdit);\r\n            });\r\n          });\r\n\r\n      },\r\n      handleDelete(index, row) {\r\n        this.$confirm(\'此操作将永久删除该信访表单, 是否继续?\', \'提示\', {\r\n          confirmButtonText: \'确定\',\r\n          cancelButtonText: \'取消\',\r\n          type: \'warning\',\r\n        })\r\n          .then(() => {\r\n            LetterClueApi.deleteLetClue({\r\n              id: row.id,\r\n            })\r\n              .then(({ data }) => {\r\n                showResMsg(data);\r\n                if (data.result) {\r\n                  this.fetchData();\r\n                }\r\n              });\r\n          });\r\n      },\r\n      modifyType(index, row) {\r\n        DataDictionaryApi.getDictionary({ listUrl: \'/dic/resulttype/all\', isDelete: false })\r\n          .then(({ data }) => {\r\n            this.typeOptions = data.data.dicCommonList;\r\n            this.processingTypeDialog = true;\r\n          });\r\n        this.rowId = row.id;\r\n      },\r\n      submitProcessingType() {\r\n        LetterClueApi.updateResultType({\r\n          id: this.rowId,\r\n          resultTypeId: this.processingType,\r\n        })\r\n          .then(({ data }) => {\r\n            showResMsg(data);\r\n            if (data.result) {\r\n              this.processingTypeDialog = false;\r\n              this.fetchData();\r\n            }\r\n          });\r\n      },\r\n      letterClueFormDialogClosedHandler() {\r\n        this.$refs.LetterClueForm.clearDialogForm();\r\n      },\r\n      letClueTagColor(value) {\r\n        switch (value) {\r\n          case \'未分类\':\r\n          case \'\':\r\n          case null:\r\n            return \'info\';\r\n          case \'案管\':\r\n            return \'success\';\r\n          case \'驳回\':\r\n            return \'danger\';\r\n          default:\r\n            return \'\';\r\n        }\r\n      },\r\n      letClueIsEditable(resultTypeId) {\r\n        switch (resultTypeId) {\r\n          case 0:\r\n          case 4:\r\n          case null:\r\n            return true;\r\n          default:\r\n            return false;\r\n        }\r\n      }\r\n    },\r\n  };\r\n<\/script>\r\n\r\n<style scoped>\r\n  /deep/ .el-form-item {\r\n    margin-bottom: 0;\r\n  }\r\n</style>\r\n']}])}}]);