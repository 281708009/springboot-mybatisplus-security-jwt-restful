(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d8b8b1c"],{"0083":function(e,t,n){"use strict";var r=n("6ead"),i=n.n(r);i.a},"032a":function(e,t,n){"use strict";var r=n("b775");t["a"]={getPermissionTree:function(e){return Object(r["a"])({method:"post",url:"/permission/tree",data:e})},addPermission:function(e){return Object(r["a"])({method:"put",url:"/permission",data:e})},updatePermission:function(e){return Object(r["a"])({method:"patch",url:"/permission",data:e})},deletePermission:function(e){return Object(r["a"])({method:"delete",url:"/permission",data:e})}}},"11e9":function(e,t,n){var r=n("52a7"),i=n("4630"),o=n("6821"),a=n("6a99"),s=n("69a8"),l=n("c69a"),c=Object.getOwnPropertyDescriptor;t.f=n("9e1e")?c:function(e,t){if(e=o(e),t=a(t,!0),l)try{return c(e,t)}catch(n){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},"454f":function(e,t,n){n("46a7");var r=n("584a").Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},"456d":function(e,t,n){var r=n("4bf8"),i=n("0d58");n("5eda")("keys",(function(){return function(e){return i(r(e))}}))},"46a7":function(e,t,n){var r=n("63b6");r(r.S+r.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"5eda":function(e,t,n){var r=n("5ca1"),i=n("8378"),o=n("79e5");e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},"69fc":function(e,t,n){t=e.exports=n("24fb")(!0),t.push([e.i,".custom-tree-node[data-v-07b178b0]{flex:1;display:flex;align-items:center;justify-content:space-between;font-size:14px;padding-right:8px}","",{version:3,sources:["H:/WORKWORK_TEST/vue-elementui-admin-sample/src/views/content/systemManagement/Permission/src/views/content/systemManagement/Permission/Index.vue"],names:[],mappings:"AAuHA,mCACA,MAAA,CACA,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,cAAA,CACA,iBACA",file:"Index.vue?vue&type=style&index=0&id=07b178b0&scoped=true&lang=css&",sourcesContent:['<template>\r\n  <div style="margin-left: 10px">\r\n    <el-button ref="AddButton" type="text" icon="el-icon-circle-plus-outline" class="reduce-height-element" @click="add()">添加权限</el-button>\r\n    <div style="overflow: auto" :style="{height: tableAutoHeight+ \'px\'}">\r\n      <el-tree :data="treeData" node-key="id" default-expand-all :expand-on-click-node="false" highlight-current>\r\n      <span class="custom-tree-node" slot-scope="{ node, data }">\r\n        <span :style="{color:node.data.isEnable?\'black\':\'red\' }"><i :class="getIconClass(node.data.type)" :style="{color: getIconColor(node.data.type)}"></i>{{ node.data.name }}</span>\r\n        <span>\r\n          <el-button type="text" style="color: #67C23A;"\r\n                     @click="() => add(node)" icon="el-icon-circle-plus-outline">添加\r\n          </el-button>\r\n          <el-button type="text" icon="el-icon-edit"\r\n                     @click="() => change(node)">修改\r\n          </el-button>\r\n          <el-button type="text" style="color: #F56C6C;"\r\n                     @click="() => remove(node, data)" icon="el-icon-delete">删除\r\n          </el-button>\r\n        </span>\r\n      </span>\r\n      </el-tree>\r\n    </div>\r\n    \x3c!-- 弹窗 --\x3e\r\n    <PermissionDialog ref="editDialog" @up-data="fetchData"></PermissionDialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import PermissionDialog from \'./PermissionDialog\';\r\n  import PermissionApi from \'src/api/permission-api\';\r\n  import { showResMsg } from \'src/utils/operation-result-message\';\r\n  import SimpleAutoHeightTable from \'src/mixin/SimpleAutoHeightTable\';\r\n\r\n  export default {\r\n    mixins: [SimpleAutoHeightTable],\r\n    name: \'Permission\',\r\n    components: {\r\n      PermissionDialog,\r\n    },\r\n    data() {\r\n      return {\r\n        treeData: [],\r\n        treeInfo: [],\r\n        nodeInfo: {},\r\n      };\r\n    },\r\n    created() {\r\n      this.fetchData();\r\n    },\r\n    methods: {\r\n      // -- 列表 --\r\n      fetchData() {\r\n        PermissionApi.getPermissionTree({ isDelete: false, orderBy: { index_num: true, name: true }, rootId: 0 })\r\n          .then(({ data }) => {\r\n            this.treeData = data.data.permissionTree;\r\n          });\r\n      },\r\n      // -- 添加 --\r\n      add(node) {\r\n        this.$refs.editDialog.show(\r\n          false,\r\n          JSON.parse(JSON.stringify(node === undefined ? {} : node.data)),\r\n          JSON.parse(JSON.stringify(this.treeData))\r\n        );\r\n      },\r\n      // -- 修改 --\r\n      change(node) {\r\n        this.$refs.editDialog.show(\r\n          true,\r\n          JSON.parse(JSON.stringify(node.data)),\r\n          JSON.parse(JSON.stringify(this.treeData))\r\n        );\r\n      },\r\n      // -- 删除 --\r\n      remove(node) {\r\n        const id = node.data.id;\r\n        this.$confirm(\'此操作将永久删除, 是否继续?\', \'提示\', {\r\n          confirmButtonText: \'确定\',\r\n          cancelButtonText: \'取消\',\r\n          type: \'warning\',\r\n        })\r\n          .then(() => {\r\n            PermissionApi.deletePermission({ id })\r\n              .then(({ data }) => {\r\n                showResMsg(data);\r\n                this.fetchData();\r\n              });\r\n          });\r\n      },\r\n      getIconClass(type) {\r\n        switch (type) {\r\n          case \'group\':\r\n            return \'el-icon-s-cooperation\';\r\n          case \'page\':\r\n            return \'el-icon-s-order\';\r\n          case \'permission\':\r\n            return \'el-icon-s-flag\';\r\n          default:\r\n            return \'el-icon-question\';\r\n        }\r\n      },\r\n      getIconColor(type) {\r\n        switch (type) {\r\n          case \'group\':\r\n            return \'#3a8ee6\';\r\n          case \'page\':\r\n            return \'#24d6bb\';\r\n          case \'permission\':\r\n            return \'#7de244\';\r\n          default:\r\n            return \'orange\';\r\n        }\r\n      },\r\n    },\r\n\r\n\r\n  };\r\n<\/script>\r\n\r\n<style scoped>\r\n  .custom-tree-node {\r\n    flex: 1;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    font-size: 14px;\r\n    padding-right: 8px;\r\n  }\r\n</style>\r\n']}])},"6ead":function(e,t,n){var r=n("69fc");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("499e").default;i("20b20887",r,!0,{sourceMap:!0,shadowMode:!1})},"7a83":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-left":"10px"}},[n("el-button",{ref:"AddButton",staticClass:"reduce-height-element",attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.add()}}},[e._v("添加权限")]),n("div",{staticStyle:{overflow:"auto"},style:{height:e.tableAutoHeight+"px"}},[n("el-tree",{attrs:{data:e.treeData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"highlight-current":""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,i=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",{style:{color:r.data.isEnable?"black":"red"}},[n("i",{class:e.getIconClass(r.data.type),style:{color:e.getIconColor(r.data.type)}}),e._v(e._s(r.data.name))]),n("span",[n("el-button",{staticStyle:{color:"#67C23A"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(){return e.add(r)}}},[e._v("添加\n        ")]),n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(){return e.change(r)}}},[e._v("修改\n        ")]),n("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(){return e.remove(r,i)}}},[e._v("删除\n        ")])],1)])}}])})],1),n("PermissionDialog",{ref:"editDialog",on:{"up-data":e.fetchData}})],1)},i=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{"close-on-click-modal":!1,title:(e.isUpdate?"修改":"添加")+"权限",visible:e.isShow,width:"400px"},on:{"update:visible":function(t){e.isShow=t}}},[n("el-form",{attrs:{model:e.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"所属层级"}},[n("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.permissionTree,props:e.prop,clearable:""},model:{value:e.form.parentIdForVModel,callback:function(t){e.$set(e.form,"parentIdForVModel",t)},expression:"form.parentIdForVModel"}})],1),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{attrs:{placeHolder:"请输入"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"类型"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[n("el-option",{attrs:{label:"分组",value:"group"}}),n("el-option",{attrs:{label:"页面",value:"page"}}),n("el-option",{attrs:{label:"权限",value:"permission"}})],1)],1),n("el-form-item",{attrs:{label:"权限值"}},[n("el-input",{attrs:{placeHolder:"重要！影响功能访问"},model:{value:e.form.permission,callback:function(t){e.$set(e.form,"permission",t)},expression:"form.permission"}})],1),n("el-form-item",{attrs:{label:"状态"}},[n("el-switch",{attrs:{"active-text":"可用","inactive-color":"red","inactive-text":"停用"},model:{value:e.form.isEnable,callback:function(t){e.$set(e.form,"isEnable",t)},expression:"form.isEnable"}})],1),n("el-form-item",{attrs:{label:"排序"}},[n("el-input",{model:{value:e.form.indexNum,callback:function(t){e.$set(e.form,"indexNum",t)},expression:"form.indexNum"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.isOk()}}},[e._v("保 存")])],1)],1)},a=[],s=n("032a"),l=n("9873"),c={name:"Add",props:{},data:function(){return{permissionTree:[],isUpdate:!1,isShow:!1,form:{},formEmpty:{name:"",type:"",permission:"",isEnable:!0,parentIdForVModel:[],parentId:null,indexNum:1e3},prop:{checkStrictly:!0,value:"id",label:"name"}}},methods:{show:function(e,t,n){this.isShow=!0,this.isUpdate=e,this.permissionTree=n,e?(this.form=t,this.form.parentIdForVModel=t.parentId,this.form.parentId=0):(this.form=JSON.parse(JSON.stringify(this.formEmpty)),void 0!==t&&(this.form.parentIdForVModel=t.id))},isOk:function(){var e=this;Array.isArray(this.form.parentIdForVModel)?0===this.form.parentIdForVModel.length?this.form.parentId=0:this.form.parentId=this.form.parentIdForVModel[this.form.parentIdForVModel.length-1]:this.form.parentId=this.form.parentIdForVModel,this.isUpdate?s["a"].updatePermission(this.form).then((function(t){var n=t.data;Object(l["a"])(n),n.result&&(e.isShow=!1,e.$emit("up-data"))})):s["a"].addPermission(this.form).then((function(t){var n=t.data;Object(l["a"])(n),n.result&&(e.isShow=!1,e.$emit("up-data"))}))}}},d=c,p=(n("e852"),n("2877")),u=Object(p["a"])(d,o,a,!1,null,"e3650942",null),f=u.exports,m=n("d6e5"),h={mixins:[m["a"]],name:"Permission",components:{PermissionDialog:f},data:function(){return{treeData:[],treeInfo:[],nodeInfo:{}}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;s["a"].getPermissionTree({isDelete:!1,orderBy:{index_num:!0,name:!0},rootId:0}).then((function(t){var n=t.data;e.treeData=n.data.permissionTree}))},add:function(e){this.$refs.editDialog.show(!1,JSON.parse(JSON.stringify(void 0===e?{}:e.data)),JSON.parse(JSON.stringify(this.treeData)))},change:function(e){this.$refs.editDialog.show(!0,JSON.parse(JSON.stringify(e.data)),JSON.parse(JSON.stringify(this.treeData)))},remove:function(e){var t=this,n=e.data.id;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s["a"].deletePermission({id:n}).then((function(e){var n=e.data;Object(l["a"])(n),t.fetchData()}))}))},getIconClass:function(e){switch(e){case"group":return"el-icon-s-cooperation";case"page":return"el-icon-s-order";case"permission":return"el-icon-s-flag";default:return"el-icon-question"}},getIconColor:function(e){switch(e){case"group":return"#3a8ee6";case"page":return"#24d6bb";case"permission":return"#7de244";default:return"orange"}}}},g=h,b=(n("0083"),Object(p["a"])(g,r,i,!1,null,"07b178b0",null));t["default"]=b.exports},"85f2":function(e,t,n){e.exports=n("454f")},"8e6e":function(e,t,n){var r=n("5ca1"),i=n("990b"),o=n("6821"),a=n("11e9"),s=n("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(e){var t,n,r=o(e),l=a.f,c=i(r),d={},p=0;while(c.length>p)n=l(r,t=c[p++]),void 0!==n&&s(d,t,n);return d}})},9093:function(e,t,n){var r=n("ce10"),i=n("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},9873:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("5c96");function i(e){var t=e.result,n=e.msg;Object(r["Notification"])({customClass:"custom-message-box-z-index",title:"操作"+(t?"成功":"失败"),message:t?null:n,type:t?"success":"error"})}},"990b":function(e,t,n){var r=n("9093"),i=n("2621"),o=n("cb7c"),a=n("7726").Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},ac6a:function(e,t,n){for(var r=n("cadf"),i=n("0d58"),o=n("2aba"),a=n("7726"),s=n("32e9"),l=n("84f2"),c=n("2b4c"),d=c("iterator"),p=c("toStringTag"),u=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=i(f),h=0;h<m.length;h++){var g,b=m[h],y=f[b],v=a[b],x=v&&v.prototype;if(x&&(x[d]||s(x,d,u),x[p]||s(x,p,b),l[b]=u,y))for(g in r)x[g]||o(x,g,r[g],!0)}},bd86:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("85f2"),i=n.n(r);function o(e,t,n){return t in e?i()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},cb21:function(e,t,n){t=e.exports=n("24fb")(!0),t.push([e.i,"body[data-v-e3650942]{margin:0}","",{version:3,sources:["H:/WORKWORK_TEST/vue-elementui-admin-sample/src/views/content/systemManagement/Permission/src/views/content/systemManagement/Permission/PermissionDialog.vue"],names:[],mappings:"AAgHA,sBACA,QACA",file:"PermissionDialog.vue?vue&type=style&index=0&id=e3650942&scoped=true&lang=css&",sourcesContent:['<template>\n  <el-dialog :close-on-click-modal="false" :title="(isUpdate?\'修改\':\'添加\')+\'权限\'" :visible.sync="isShow" width="400px">\n    <el-form :model="form" label-width="80px">\n      <el-form-item label="所属层级">\n        <el-cascader :options="permissionTree" :props="prop" style="width: 100%" clearable v-model="form.parentIdForVModel"></el-cascader>\n      </el-form-item>\n      <el-form-item label="名称">\n        <el-input v-model="form.name" placeHolder="请输入"></el-input>\n      </el-form-item>\n      <el-form-item label="类型">\n        <el-select v-model="form.type" placeholder="请输入" style="width: 100%">\n          <el-option label="分组" value="group"></el-option>\n          <el-option label="页面" value="page"></el-option>\n          <el-option label="权限" value="permission"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label="权限值">\n        <el-input v-model="form.permission" placeHolder="重要！影响功能访问"></el-input>\n      </el-form-item>\n      <el-form-item label="状态">\n        <el-switch v-model="form.isEnable" active-text="可用" inactive-color="red" inactive-text="停用"></el-switch>\n      </el-form-item>\n      <el-form-item label="排序">\n        <el-input v-model="form.indexNum"></el-input>\n      </el-form-item>\n    </el-form>\n    <span slot="footer" class="dialog-footer">\n        <el-button type="primary" @click="isOk()">保 存</el-button>\n      </span>\n  </el-dialog>\n</template>\n\n<script>\n  import PermissionApi from \'src/api/permission-api\';\n  import { showResMsg } from \'src/utils/operation-result-message\';\n\n  export default {\n    name: \'Add\',\n    props: {},\n    data() {\n      return {\n        permissionTree: [],\n        isUpdate: false,\n        isShow: false,\n        form: {},\n        formEmpty: {\n          name: \'\',\n          type: \'\',\n          permission: \'\',\n          isEnable: true,\n          parentIdForVModel: [],\n          parentId: null,\n          indexNum: 1000,\n        },\n        prop: {\n          checkStrictly: true,\n          value: \'id\',\n          label: \'name\',\n        },\n      };\n    },\n    methods: {\n      show(isUpdate, rowInfo, treeInfo) {\n        this.isShow = true;\n        this.isUpdate = isUpdate;\n        this.permissionTree = treeInfo;\n        if (isUpdate) {\n          this.form = rowInfo;\n          this.form.parentIdForVModel = rowInfo.parentId;\n          this.form.parentId = 0;\n        } else {\n          this.form = JSON.parse(JSON.stringify(this.formEmpty));\n          if (rowInfo !== undefined) {\n            this.form.parentIdForVModel = rowInfo.id;\n          }\n        }\n      },\n      isOk() {\n        if (Array.isArray(this.form.parentIdForVModel)) {\n          if (this.form.parentIdForVModel.length === 0) {\n            this.form.parentId = 0;\n          } else {\n            this.form.parentId = this.form.parentIdForVModel[this.form.parentIdForVModel.length - 1];\n          }\n        } else {\n          this.form.parentId = this.form.parentIdForVModel;\n        }\n        if (this.isUpdate) {\n          PermissionApi.updatePermission(this.form)\n            .then(({ data }) => {\n              showResMsg(data);\n              if (data.result) {\n                this.isShow = false;\n                this.$emit(\'up-data\');\n              }\n            });\n        } else {\n          PermissionApi.addPermission(this.form)\n            .then(({ data }) => {\n              showResMsg(data);\n              if (data.result) {\n                this.isShow = false;\n                this.$emit(\'up-data\');\n              }\n            });\n        }\n      },\n    },\n  };\n<\/script>\n\n<style scoped>\n  body {\n    margin: 0;\n  }\n</style>\n']}])},d6e5:function(e,t,n){"use strict";n("8e6e"),n("ac6a"),n("456d");var r=n("bd86"),i=n("2f62");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s={data:function(){return{tableAutoHeight:0}},created:function(){this.setTableHeight(this.contentHeight)},watch:{contentHeight:function(e){this.setTableHeight(e)},contentWidth:function(){this.setTableHeight(this.contentHeight)}},methods:{setTableHeight:function(e){var t=this;this.$nextTick((function(){for(var n=0,r=document.getElementsByClassName("reduce-height-element"),i=0;i<r.length;i++)n+=r[i].offsetHeight;t.tableAutoHeight=e-n}))}},computed:a({},Object(i["c"])({contentHeight:"layout/getContentHeight",contentWidth:"layout/getContentWidth"}))};t["a"]=s},e852:function(e,t,n){"use strict";var r=n("f928"),i=n.n(r);i.a},f1ae:function(e,t,n){"use strict";var r=n("86cc"),i=n("4630");e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},f928:function(e,t,n){var r=n("cb21");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("499e").default;i("79496f30",r,!0,{sourceMap:!0,shadowMode:!1})}}]);