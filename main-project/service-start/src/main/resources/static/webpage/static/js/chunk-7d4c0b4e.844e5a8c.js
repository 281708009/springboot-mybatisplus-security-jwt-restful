(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d4c0b4e"],{"11e9":function(e,t,r){var n=r("52a7"),a=r("4630"),i=r("6821"),o=r("6a99"),s=r("69a8"),c=r("c69a"),l=Object.getOwnPropertyDescriptor;t.f=r("9e1e")?l:function(e,t){if(e=i(e),t=o(t,!0),c)try{return l(e,t)}catch(r){}if(s(e,t))return a(!n.f.call(e,t),e[t])}},"3f48":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{staticClass:"form-top reduce-height-element",attrs:{inline:!0}},[r("el-form-item",[r("el-button",{staticClass:"custom-button-in-toolbar",attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-circle-plus-outline"},on:{click:e.prepareAdd}},[e._v("增加")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-class-name":"custom-header-cell",height:e.tableAutoHeight,stripe:""}},[r("el-table-column",{attrs:{label:"序号",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.$index+(e.searchForm.pageNum-1)*e.searchForm.pageSize+1)+" ")])]}}])}),r("el-table-column",{attrs:{prop:"username",align:"center",width:"150",label:"用户名",sortable:""}}),r("el-table-column",{attrs:{prop:"nickname",align:"center",width:"150",label:"昵称",sortable:""}}),r("el-table-column",{attrs:{prop:"unitName",align:"center","min-width":"120",label:"所属组织机构名称",sortable:""}}),r("el-table-column",{attrs:{prop:"roleList",align:"left","min-width":"200",label:"账号角色",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.roleList,(function(t){return r("span",[r("el-tag",{staticStyle:{"margin-left":"2px","margin-top":"2px"},attrs:{type:t.isEnable?"primary":"danger",size:"mini"}},[e._v(e._s(t.name))])],1)}))}}])}),r("el-table-column",{attrs:{prop:"isEnable",align:"center",width:"80",label:"状态",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{staticStyle:{"margin-left":"2px"},attrs:{type:t.row.isEnable?"primary":"danger",size:"mini"}},[e._v(" "+e._s(!0===t.row.isEnable?"可用":"停用"))])]}}])}),r("el-table-column",{attrs:{prop:"isAdmin",align:"center",width:"90",label:"管理员",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{staticStyle:{"margin-left":"2px"},attrs:{type:t.row.isAdmin?"primary":"info",size:"mini"}},[e._v(" "+e._s(!0===t.row.isAdmin?"管理员":"用户"))])]}}])}),r("el-table-column",{attrs:{fixed:"right",width:"220",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticClass:"custom-button-in-table",attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-edit"},on:{click:function(r){return e.prepareUpdate(t.$index,t.row)}}},[e._v("修改\n        ")]),r("el-button",{staticClass:"custom-button-in-table",attrs:{type:"danger",size:"mini",plain:"",icon:"el-icon-delete"},on:{click:function(r){return e.userDelete(t.$index,t.row)}}},[e._v("删除\n        ")]),r("el-button",{staticClass:"custom-button-in-table",attrs:{type:"warning",size:"mini",plain:"",icon:"el-icon-refresh"},on:{click:function(r){return e.resetPassword(t.$index,t.row)}}},[e._v("重置密码\n        ")])]}}])})],1),r("el-pagination",{ref:"pagination",staticClass:"reduce-height-element",staticStyle:{"text-align":"center","box-sizing":"border-box"},attrs:{"current-page":e.searchForm.pageNum,"page-size":e.searchForm.pageSize,"page-sizes":[10,20,30,40,50,100,200,300,400,500],layout:"total, sizes, prev, pager, next, jumper",total:e.totalNumber},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.searchForm,"pageNum",t)},"update:current-page":function(t){return e.$set(e.searchForm,"pageNum",t)}}}),r("el-dialog",{attrs:{"close-on-click-modal":!1,title:(e.isCreate?"增加":"修改")+"用户",width:"600px",visible:e.isShowAddOrUpdateDialog},on:{"update:visible":function(t){e.isShowAddOrUpdateDialog=t}}},[r("el-form",{ref:"addOrUpdateForm",attrs:{model:e.form,"label-position":"right","label-width":"80px"}},[r("el-form-item",{attrs:{label:"昵称:"}},[r("el-input",{model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),r("el-form-item",{attrs:{label:"用户名:"}},[r("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e.isShowPasswordEditor?r("el-form-item",{attrs:{label:"密码:"}},[r("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),r("el-form-item",{attrs:{label:"组织机构:"}},[r("tree-select",{attrs:{treeData:e.unitTreeData,props:{children:"children",label:"name"},nodeKey:"id"},model:{value:e.form.unitId,callback:function(t){e.$set(e.form,"unitId",t)},expression:"form.unitId"}})],1),r("el-form-item",{attrs:{label:"账户状态:"}},[r("el-switch",{attrs:{"active-text":"可用","inactive-text":"停用"},model:{value:e.form.isEnable,callback:function(t){e.$set(e.form,"isEnable",t)},expression:"form.isEnable"}})],1),r("el-form-item",{attrs:{label:"管理员:"}},[r("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:e.form.isAdmin,callback:function(t){e.$set(e.form,"isAdmin",t)},expression:"form.isAdmin"}})],1),r("el-form-item",{attrs:{label:"角色:"}},[r("el-checkbox-group",{model:{value:e.form.roleIdList,callback:function(t){e.$set(e.form,"roleIdList",t)},expression:"form.roleIdList"}},e._l(e.roleData,(function(t){return r("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v("\n            "+e._s(t.name)+"\n          ")])})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.isShowAddOrUpdateDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.commitAddOrUpdate}},[e._v("确 定")])],1)],1)],1)},a=[],i=r("b775"),o={getUserList:function(e){return Object(i["a"])({method:"post",url:"/user/all",data:e})},getUserOne:function(e){return Object(i["a"])({method:"post",url:"/user",data:e})},addUser:function(e){return Object(i["a"])({method:"put",url:"/user",data:e})},updateUser:function(e){return Object(i["a"])({method:"patch",url:"/user",data:e})},deleteUser:function(e){return Object(i["a"])({method:"delete",url:"/user",data:e})},resetPassword:function(e){return Object(i["a"])({method:"patch",url:"/user/password/default",data:e})}},s=r("7c6d"),c=r("64bd"),l=r("9873"),u=r("d6e5"),d=r("b695"),f={mixins:[u["a"]],components:{TreeSelect:d["a"]},name:"User",data:function(){return{treeProps:{checkStrictly:!0,value:"id",label:"name",children:"children"},isCreate:!0,tableData:[],totalNumber:0,unitTreeData:[],isShowAddOrUpdateDialog:!1,isShowPasswordEditor:!1,form:{},formEmpty:{isEnable:!0,isAdmin:!1,nickname:"",password:"",roleIdList:[],unitId:[],username:""},searchForm:{pageNum:1,pageSize:100,isDelete:!1,orderBy:{}},roleData:[]}},created:function(){var e=this;this.form=JSON.parse(JSON.stringify(this.formEmpty)),c["a"].getUnitTree({isDelete:!1,orderBy:{name:!0},rootId:0}).then((function(t){var r=t.data;e.unitTreeData=r.data.unitTree})),this.fetchData(),s["a"].getRoleList({isDelete:this.isDelete,orderBy:{name:!0}}).then((function(t){var r=t.data;e.roleData=r.data.roleList}))},methods:{fetchData:function(){var e=this;o.getUserList(this.searchForm).then((function(t){var r=t.data;e.tableData=r.data.userList,e.totalNumber=r.data.total}))},commitAddOrUpdate:function(){var e=this;this.isCreate?o.addUser(this.form).then((function(t){var r=t.data;Object(l["a"])(r),r.result&&(e.isShowAddOrUpdateDialog=!1,e.fetchData())})):o.updateUser(this.form).then((function(t){var r=t.data;Object(l["a"])(r),r.result&&(e.isShowAddOrUpdateDialog=!1,e.fetchData())}))},prepareAdd:function(){this.form=JSON.parse(JSON.stringify(this.formEmpty)),this.isCreate=!0,this.isShowPasswordEditor=!0,this.isShowAddOrUpdateDialog=!0},prepareUpdate:function(e,t){var r=this;this.isCreate=!1,this.isShowAddOrUpdateDialog=!0,this.isShowPasswordEditor=!1,this.form=JSON.parse(JSON.stringify(this.formEmpty)),o.getUserOne({id:t.id}).then((function(e){var t=e.data;r.form=t.data.user}))},userDelete:function(e,t){var r=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.deleteUser({id:t.id}).then((function(e){var t=e.data;Object(l["a"])(t),r.fetchData()}))}))},resetPassword:function(e,t){var r=this;this.$confirm("此操作将重置此用户密码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.resetPassword({id:t.id}).then((function(e){var t=e.data;Object(l["a"])(t),r.fetchData()}))}))},handleSizeChange:function(e){this.searchForm.pageSize=e,this.fetchData()},handleCurrentChange:function(e){this.searchForm.pageNum=e,this.fetchData()}}},p=f,h=r("2877"),m=Object(h["a"])(p,n,a,!1,null,"6b193491",null);t["default"]=m.exports},"454f":function(e,t,r){r("46a7");var n=r("584a").Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},"456d":function(e,t,r){var n=r("4bf8"),a=r("0d58");r("5eda")("keys",(function(){return function(e){return a(n(e))}}))},"46a7":function(e,t,r){var n=r("63b6");n(n.S+n.F*!r("8e60"),"Object",{defineProperty:r("d9f6").f})},"5dbc":function(e,t,r){var n=r("d3f4"),a=r("8b97").set;e.exports=function(e,t,r){var i,o=t.constructor;return o!==r&&"function"==typeof o&&(i=o.prototype)!==r.prototype&&n(i)&&a&&a(e,i),e}},"5eda":function(e,t,r){var n=r("5ca1"),a=r("8378"),i=r("79e5");e.exports=function(e,t){var r=(a.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*i((function(){r(1)})),"Object",o)}},"64bd":function(e,t,r){"use strict";var n=r("b775");t["a"]={getUnitTree:function(e){return Object(n["a"])({method:"post",url:"/unit/tree",data:e})},addUnit:function(e){return Object(n["a"])({method:"put",url:"/unit",data:e})},updateUnit:function(e){return Object(n["a"])({method:"patch",url:"/unit",data:e})},deleteUnit:function(e){return Object(n["a"])({method:"delete",url:"/unit",data:e})}}},"7c6d":function(e,t,r){"use strict";var n=r("b775");t["a"]={getRoleList:function(e){return Object(n["a"])({method:"post",url:"/role/all",data:e})},getRoleOne:function(e){return Object(n["a"])({method:"post",url:"/role",data:e})},addRole:function(e){return Object(n["a"])({method:"put",url:"/role",data:e})},updateRole:function(e){return Object(n["a"])({method:"patch",url:"/role",data:e})},deleteRole:function(e){return Object(n["a"])({method:"delete",url:"/role",data:e})}}},"85f2":function(e,t,r){e.exports=r("454f")},"8b97":function(e,t,r){var n=r("d3f4"),a=r("cb7c"),i=function(e,t){if(a(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(a){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:i}},"8e6e":function(e,t,r){var n=r("5ca1"),a=r("990b"),i=r("6821"),o=r("11e9"),s=r("f1ae");n(n.S,"Object",{getOwnPropertyDescriptors:function(e){var t,r,n=i(e),c=o.f,l=a(n),u={},d=0;while(l.length>d)r=c(n,t=l[d++]),void 0!==r&&s(u,t,r);return u}})},9093:function(e,t,r){var n=r("ce10"),a=r("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,a)}},9873:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("5c96");function a(e){var t=e.result,r=e.msg;Object(n["Notification"])({customClass:"custom-message-box-z-index",title:"操作"+(t?"成功":"失败"),message:t?null:r,type:t?"success":"error"})}},"990b":function(e,t,r){var n=r("9093"),a=r("2621"),i=r("cb7c"),o=r("7726").Reflect;e.exports=o&&o.ownKeys||function(e){var t=n.f(i(e)),r=a.f;return r?t.concat(r(e)):t}},aa77:function(e,t,r){var n=r("5ca1"),a=r("be13"),i=r("79e5"),o=r("fdef"),s="["+o+"]",c="​",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(e,t,r){var a={},s=i((function(){return!!o[e]()||c[e]()!=c})),l=a[e]=s?t(f):o[e];r&&(a[r]=l),n(n.P+n.F*s,"String",a)},f=d.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},b695:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-select",{ref:"selectReport",staticStyle:{width:"100%"},attrs:{filterable:"","filter-method":e.TreeSelectFilter,placeholder:"请选择所属单位"},on:{blur:e.selectBlurHandler},model:{value:e.selectedText,callback:function(t){e.selectedText=t},expression:"selectedText"}},[r("el-option",{staticStyle:{width:"100%",height:"250px",overflow:"auto","background-color":"#fff"},attrs:{disabled:"",value:""}},[r("el-tree",{ref:"InnerTree",attrs:{"filter-node-method":e.filterNode,data:e.treeData,props:e.props,"node-key":e.nodeKey,"default-expand-all":"","expand-on-click-node":!1,"highlight-current":""},on:{"node-click":e.handleNodeClick}})],1)],1)},a=[],i=(r("c5f6"),{name:"TreeSelect",props:{value:[String,Number],treeData:{type:Array,default:[]},props:{type:Object,default:{children:"children",label:"label"}},nodeKey:{type:String,default:void 0}},data:function(){return{selectedId:void 0,selectedText:void 0}},created:function(){if(void 0===this.nodeKey)throw'TreeSelect Must Use "nodeKey"!'},mounted:function(){this.setSelectShowTextBeyKey(this.value)},methods:{selectBlurHandler:function(){this.$refs.InnerTree.filter()},filterNode:function(e,t){return!e||-1!==t[this.props.label].indexOf(e)},TreeSelectFilter:function(e){this.$refs.InnerTree.filter(e)},handleNodeClick:function(e){this.selectedText=e[this.props.label],this.$refs.selectReport.blur(),this.$emit("input",e[this.nodeKey])},setSelectShowTextBeyKey:function(e){this.$refs.InnerTree.setCurrentKey(e);var t=this.$refs.InnerTree.getCurrentNode();null!==t&&(this.selectedText=t[this.props.label])}},watch:{value:function(e){this.setSelectShowTextBeyKey(e)}}}),o=i,s=r("2877"),c=Object(s["a"])(o,n,a,!1,null,"5030cbed",null);t["a"]=c.exports},bd86:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("85f2"),a=r.n(n);function i(e,t,r){return t in e?a()(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},c5f6:function(e,t,r){"use strict";var n=r("7726"),a=r("69a8"),i=r("2d95"),o=r("5dbc"),s=r("6a99"),c=r("79e5"),l=r("9093").f,u=r("11e9").f,d=r("86cc").f,f=r("aa77").trim,p="Number",h=n[p],m=h,b=h.prototype,g=i(r("2aeb")(b))==p,v="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():f(t,3);var r,n,a,i=t.charCodeAt(0);if(43===i||45===i){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+t}for(var o,c=t.slice(2),l=0,u=c.length;l<u;l++)if(o=c.charCodeAt(l),o<48||o>a)return NaN;return parseInt(c,n)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof h&&(g?c((function(){b.valueOf.call(r)})):i(r)!=p)?o(new m(y(t)),r,h):y(t)};for(var w,O=r("9e1e")?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;O.length>x;x++)a(m,w=O[x])&&!a(h,w)&&d(h,w,u(m,w));h.prototype=b,b.constructor=h,r("2aba")(n,p,h)}},d6e5:function(e,t,r){"use strict";r("8e6e"),r("ac6a"),r("456d");var n=r("bd86"),a=r("2f62");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(r,!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s={data:function(){return{tableAutoHeight:0}},created:function(){this.setTableHeight(this.contentHeight)},watch:{contentHeight:function(e){this.setTableHeight(e)},contentWidth:function(){this.setTableHeight(this.contentHeight)}},methods:{setTableHeight:function(e){var t=this;this.$nextTick((function(){for(var r=0,n=document.getElementsByClassName("reduce-height-element"),a=0;a<n.length;a++)r+=n[a].offsetHeight;t.tableAutoHeight=e-r}))}},computed:o({},Object(a["c"])({contentHeight:"layout/getContentHeight",contentWidth:"layout/getContentWidth"}))};t["a"]=s},f1ae:function(e,t,r){"use strict";var n=r("86cc"),a=r("4630");e.exports=function(e,t,r){t in e?n.f(e,t,a(0,r)):e[t]=r}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);