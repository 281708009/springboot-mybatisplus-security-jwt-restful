(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42d92fde"],{"11e9":function(e,t,n){var r=n("52a7"),i=n("4630"),o=n("6821"),a=n("6a99"),c=n("69a8"),s=n("c69a"),l=Object.getOwnPropertyDescriptor;t.f=n("9e1e")?l:function(e,t){if(e=o(e),t=a(t,!0),s)try{return l(e,t)}catch(n){}if(c(e,t))return i(!r.f.call(e,t),e[t])}},2664:function(e,t,n){"use strict";var r=n("fc65"),i=n.n(r);i.a},"43a2":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-left":"10px"}},[n("el-button",{ref:"AddButton",staticClass:"reduce-height-element",attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.add()}}},[e._v("添加单位\n  ")]),n("div",{staticStyle:{overflow:"auto"},style:{height:e.tableAutoHeight+"px"}},[n("el-tree",{attrs:{data:e.treeData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"highlight-current":""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,i=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v(e._s(r.data.name))]),n("span",[n("el-button",{staticStyle:{color:"#67C23A"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(){return e.add(r)}}},[e._v("添加\n        ")]),n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(){return e.change(r)}}},[e._v("修改\n        ")]),n("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(){return e.remove(r,i)}}},[e._v("删除\n        ")])],1)])}}])})],1),n("UnitDialog",{ref:"editDialog",on:{"up-data":e.upData}})],1)},i=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{"close-on-click-modal":!1,title:(e.isUpdate?"修改":"新增")+"单位",visible:e.isShow,width:"400px"},on:{"update:visible":function(t){e.isShow=t}}},[n("el-form",{attrs:{model:e.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"上级"}},[n("tree-select",{attrs:{treeData:e.unitTree,props:e.prop,nodeKey:"id"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"类型"}},[n("el-input",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),n("el-form-item",{attrs:{label:"排序"}},[n("el-input",{model:{value:e.form.indexNum,callback:function(t){e.$set(e.form,"indexNum",t)},expression:"form.indexNum"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.isOk()}}},[e._v("确 定")])],1)],1)],1)},a=[],c=n("64bd"),s=n("9873"),l=n("b695"),u={name:"Change",components:{TreeSelect:l["a"]},data:function(){return{isShow:!1,isUpdate:{},unitTree:{},form:{},formEmpty:{name:"",type:"",parentId:"",indexNum:1e3},prop:{checkStrictly:!0,value:"id",label:"name"}}},methods:{show:function(e,t,n){this.isShow=!0,this.isUpdate=e,this.unitTree=n,this.form=JSON.parse(JSON.stringify(this.formEmpty)),e?this.form=t:void 0!==t&&(this.form.parentId=t.id)},isOk:function(){var e=this;this.isUpdate?c["a"].updateUnit(this.form).then((function(t){var n=t.data;Object(s["a"])(n),n.result&&(e.isShow=!1,e.$emit("up-data"))})):c["a"].addUnit(this.form).then((function(t){var n=t.data;Object(s["a"])(n),n.result&&(e.isShow=!1,e.$emit("up-data"))}))}}},d=u,f=n("2877"),p=Object(f["a"])(d,o,a,!1,null,"f0a837c8",null),h=p.exports,m=n("d6e5"),b={mixins:[m["a"]],name:"unit",components:{UnitDialog:h},data:function(){return{treeData:[],showAdd:!1,addInfo:{rowInfo:"",addTitle:""},showChange:!1,changeInfo:{rowInfo:"",changeTitle:"",changeTree:[]},form:{isDelete:!1,orderBy:{name:!0},rootId:0}}},created:function(){this.upData()},methods:{add:function(e){this.$refs.editDialog.show(!1,JSON.parse(JSON.stringify(void 0===e?{}:e.data)),JSON.parse(JSON.stringify(this.treeData)))},upData:function(){var e=this;c["a"].getUnitTree(this.form).then((function(t){var n=t.data;e.treeData=n.data.unitTree}))},change:function(e){this.$refs.editDialog.show(!0,JSON.parse(JSON.stringify(e.data)),JSON.parse(JSON.stringify(this.treeData)))},remove:function(e){var t=this,n=e.data.id;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){c["a"].deleteUnit({id:n}).then((function(e){var n=e.data;Object(s["a"])(n),n.result&&t.upData()}))}))}}},g=b,y=(n("2664"),Object(f["a"])(g,r,i,!1,null,"1b10d84d",null));t["default"]=y.exports},"454f":function(e,t,n){n("46a7");var r=n("584a").Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},"456d":function(e,t,n){var r=n("4bf8"),i=n("0d58");n("5eda")("keys",(function(){return function(e){return i(r(e))}}))},"46a7":function(e,t,n){var r=n("63b6");r(r.S+r.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"5dbc":function(e,t,n){var r=n("d3f4"),i=n("8b97").set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},"5eda":function(e,t,n){var r=n("5ca1"),i=n("8378"),o=n("79e5");e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},"64bd":function(e,t,n){"use strict";var r=n("b775");t["a"]={getUnitTree:function(e){return Object(r["a"])({method:"post",url:"/unit/tree",data:e})},addUnit:function(e){return Object(r["a"])({method:"put",url:"/unit",data:e})},updateUnit:function(e){return Object(r["a"])({method:"patch",url:"/unit",data:e})},deleteUnit:function(e){return Object(r["a"])({method:"delete",url:"/unit",data:e})}}},"85f2":function(e,t,n){e.exports=n("454f")},"8b97":function(e,t,n){var r=n("d3f4"),i=n("cb7c"),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},"8e6e":function(e,t,n){var r=n("5ca1"),i=n("990b"),o=n("6821"),a=n("11e9"),c=n("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(e){var t,n,r=o(e),s=a.f,l=i(r),u={},d=0;while(l.length>d)n=s(r,t=l[d++]),void 0!==n&&c(u,t,n);return u}})},9093:function(e,t,n){var r=n("ce10"),i=n("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},9873:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("5c96");function i(e){var t=e.result,n=e.msg;Object(r["Notification"])({customClass:"custom-message-box-z-index",title:"操作"+(t?"成功":"失败"),message:t?null:n,type:t?"success":"error"})}},"990b":function(e,t,n){var r=n("9093"),i=n("2621"),o=n("cb7c"),a=n("7726").Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},aa77:function(e,t,n){var r=n("5ca1"),i=n("be13"),o=n("79e5"),a=n("fdef"),c="["+a+"]",s="​",l=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),d=function(e,t,n){var i={},c=o((function(){return!!a[e]()||s[e]()!=s})),l=i[e]=c?t(f):a[e];n&&(i[n]=l),r(r.P+r.F*c,"String",i)},f=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},b695:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",{ref:"selectReport",staticStyle:{width:"100%"},attrs:{filterable:"","filter-method":e.TreeSelectFilter,placeholder:"请选择所属单位"},on:{blur:e.selectBlurHandler},model:{value:e.selectedText,callback:function(t){e.selectedText=t},expression:"selectedText"}},[n("el-option",{staticStyle:{width:"100%",height:"250px",overflow:"auto","background-color":"#fff"},attrs:{disabled:"",value:""}},[n("el-tree",{ref:"InnerTree",attrs:{"filter-node-method":e.filterNode,data:e.treeData,props:e.props,"node-key":e.nodeKey,"default-expand-all":"","expand-on-click-node":!1,"highlight-current":""},on:{"node-click":e.handleNodeClick}})],1)],1)},i=[],o=(n("c5f6"),{name:"TreeSelect",props:{value:[String,Number],treeData:{type:Array,default:[]},props:{type:Object,default:{children:"children",label:"label"}},nodeKey:{type:String,default:void 0}},data:function(){return{selectedId:void 0,selectedText:void 0}},created:function(){if(void 0===this.nodeKey)throw'TreeSelect Must Use "nodeKey"!'},mounted:function(){this.setSelectShowTextBeyKey(this.value)},methods:{selectBlurHandler:function(){this.$refs.InnerTree.filter()},filterNode:function(e,t){return!e||-1!==t[this.props.label].indexOf(e)},TreeSelectFilter:function(e){this.$refs.InnerTree.filter(e)},handleNodeClick:function(e){this.selectedText=e[this.props.label],this.$refs.selectReport.blur(),this.$emit("input",e[this.nodeKey])},setSelectShowTextBeyKey:function(e){this.$refs.InnerTree.setCurrentKey(e);var t=this.$refs.InnerTree.getCurrentNode();null!==t&&(this.selectedText=t[this.props.label])}},watch:{value:function(e){this.setSelectShowTextBeyKey(e)}}}),a=o,c=n("2877"),s=Object(c["a"])(a,r,i,!1,null,"5030cbed",null);t["a"]=s.exports},bd86:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("85f2"),i=n.n(r);function o(e,t,n){return t in e?i()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},c5f6:function(e,t,n){"use strict";var r=n("7726"),i=n("69a8"),o=n("2d95"),a=n("5dbc"),c=n("6a99"),s=n("79e5"),l=n("9093").f,u=n("11e9").f,d=n("86cc").f,f=n("aa77").trim,p="Number",h=r[p],m=h,b=h.prototype,g=o(n("2aeb")(b))==p,y="trim"in String.prototype,v=function(e){var t=c(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():f(t,3);var n,r,i,o=t.charCodeAt(0);if(43===o||45===o){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,s=t.slice(2),l=0,u=s.length;l<u;l++)if(a=s.charCodeAt(l),a<48||a>i)return NaN;return parseInt(s,r)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(g?s((function(){b.valueOf.call(n)})):o(n)!=p)?a(new m(v(t)),n,h):v(t)};for(var x,O=n("9e1e")?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;O.length>w;w++)i(m,x=O[w])&&!i(h,x)&&d(h,x,u(m,x));h.prototype=b,b.constructor=h,n("2aba")(r,p,h)}},d6e5:function(e,t,n){"use strict";n("8e6e"),n("ac6a"),n("456d");var r=n("bd86"),i=n("2f62");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={data:function(){return{tableAutoHeight:0}},created:function(){this.setTableHeight(this.contentHeight)},watch:{contentHeight:function(e){this.setTableHeight(e)},contentWidth:function(){this.setTableHeight(this.contentHeight)}},methods:{setTableHeight:function(e){var t=this;this.$nextTick((function(){for(var n=0,r=document.getElementsByClassName("reduce-height-element"),i=0;i<r.length;i++)n+=r[i].offsetHeight;t.tableAutoHeight=e-n}))}},computed:a({},Object(i["c"])({contentHeight:"layout/getContentHeight",contentWidth:"layout/getContentWidth"}))};t["a"]=c},ef05:function(e,t,n){t=e.exports=n("24fb")(!0),t.push([e.i,".custom-tree-node[data-v-1b10d84d]{flex:1;display:flex;align-items:center;justify-content:space-between;font-size:14px;padding-right:8px}","",{version:3,sources:["H:/WORKWORK_TEST/vue-elementui-admin-sample/src/views/content/systemManagement/Unit/src/views/content/systemManagement/Unit/Index.vue"],names:[],mappings:"AAmHA,mCACA,MAAA,CACA,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,cAAA,CACA,iBACA",file:"Index.vue?vue&type=style&index=0&id=1b10d84d&scoped=true&lang=css&",sourcesContent:['<template>\n  <div style="margin-left: 10px">\n    <el-button ref="AddButton" type="text" icon="el-icon-circle-plus-outline" class="reduce-height-element" @click="add()">添加单位\n    </el-button>\n    <div style="overflow: auto" :style="{height: tableAutoHeight+ \'px\'}">\n      <el-tree :data="treeData" node-key="id" default-expand-all :expand-on-click-node="false" highlight-current>\n      <span class="custom-tree-node" slot-scope="{ node, data }">\n        <span>{{ node.data.name }}</span>\n        <span>\n          <el-button type="text" style="color: #67C23A;"\n                     @click="() => add(node)" icon="el-icon-circle-plus-outline">添加\n          </el-button>\n          <el-button type="text" icon="el-icon-edit"\n                     @click="() => change(node)">修改\n          </el-button>\n          <el-button type="text" style="color: #F56C6C;"\n                     @click="() => remove(node, data)" icon="el-icon-delete">删除\n          </el-button>\n        </span>\n      </span>\n      </el-tree>\n    </div>\n    \x3c!--添加修改--\x3e\n    <UnitDialog ref="editDialog" @up-data="upData"></UnitDialog>\n  </div>\n</template>\n\n<script>\n  import UnitDialog from \'./UnitDialog\';\n  import UnitApi from \'src/api/unit-api\';\n  import { showResMsg } from \'src/utils/operation-result-message\';\n  import SimpleAutoHeightTable from \'src/mixin/SimpleAutoHeightTable\';\n\n  export default {\n    mixins: [SimpleAutoHeightTable],\n    name: \'unit\',\n    components: {\n      UnitDialog,\n    },\n    data() {\n      return {\n        treeData: [],\n        showAdd: false,\n        addInfo: {\n          rowInfo: \'\',\n          addTitle: \'\',\n        },\n        showChange: false,\n        changeInfo: {\n          rowInfo: \'\',\n          changeTitle: \'\',\n          changeTree: [],\n        },\n        form: {\n          isDelete: false,\n          orderBy: {\n            name: true,\n          },\n          rootId: 0,\n        },\n      };\n    },\n    created() {\n      this.upData();\n    },\n    methods: {\n      // -- 添加 --\n      add(node) {\n        this.$refs.editDialog.show(\n          false,\n          JSON.parse(JSON.stringify(node === undefined ? {} : node.data)),\n          JSON.parse(JSON.stringify(this.treeData))\n        );\n      },\n      // -- 获取、更新 --\n      upData() {\n        UnitApi.getUnitTree(this.form)\n          .then(({ data }) => {\n            this.treeData = data.data.unitTree;\n          });\n      },\n      // -- 修改 --\n      change(node) {\n        this.$refs.editDialog.show(\n          true,\n          JSON.parse(JSON.stringify(node.data)),\n          JSON.parse(JSON.stringify(this.treeData))\n        );\n      },\n      // -- 删除 --\n      remove(node) {\n        const id = node.data.id;\n        this.$confirm(\'此操作将永久删除, 是否继续?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\',\n        })\n          .then(() => {\n            UnitApi.deleteUnit({ id })\n              .then(({ data }) => {\n                showResMsg(data);\n                if (data.result) {\n                  this.upData();\n                }\n              });\n          });\n      },\n\n    },\n\n\n  };\n<\/script>\n\n<style scoped>\n  .custom-tree-node {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 14px;\n    padding-right: 8px;\n  }\n</style>\n']}])},f1ae:function(e,t,n){"use strict";var r=n("86cc"),i=n("4630");e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},fc65:function(e,t,n){var r=n("ef05");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("499e").default;i("4f08abab",r,!0,{sourceMap:!0,shadowMode:!1})},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);