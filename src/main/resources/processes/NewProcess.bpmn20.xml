<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:flowable="http://flowable.org/bpmn"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"
             typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath"
             targetNamespace="http://www.flowable.org/test">
    <process id="CATAGORY_PHYSIC_SEAL" name="业务防伪用印分类流程" isExecutable="true">
        <startEvent id="start" name="开始"/>
        <userTask id="CATEGORYID_FILE_AUDIT" name="审批节点1" flowable:assignee="${userId}"/>
        <exclusiveGateway id="FILE_GATEWAY"/>
        <userTask id="CATEGORYID_SEAL_AUDIT" name="审批节点2" flowable:candidateUsers="2198741168097853440"/>
        <exclusiveGateway id="SEAL_GATEWAY"/>
        <serviceTask id="SEAL_AUTH" name="自动授权节点" flowable:delegateExpression="${sealAuthDelegate}"/>
        <userTask id="CATEGORYID_SEAL_USE" name="使用节点" flowable:candidateUsers="${sealUsers}"/>
        <endEvent id="reject" name="拒绝"/>
        <endEvent id="complete" name="结束"/>

        <sequenceFlow sourceRef="start" targetRef="CATEGORYID_FILE_AUDIT"/>
        <sequenceFlow sourceRef="CATEGORYID_FILE_AUDIT" targetRef="FILE_GATEWAY"/>
        <sequenceFlow sourceRef="FILE_GATEWAY" targetRef="CATEGORYID_SEAL_AUDIT">
            <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approve}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow sourceRef="FILE_GATEWAY" targetRef="reject">
            <conditionExpression xsi:type="tFormalExpression"><![CDATA[${!approve}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow sourceRef="CATEGORYID_SEAL_AUDIT" targetRef="SEAL_GATEWAY"/>
        <sequenceFlow sourceRef="SEAL_GATEWAY" targetRef="SEAL_AUTH">
            <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approve}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow sourceRef="SEAL_GATEWAY" targetRef="reject">
            <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approve}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow sourceRef="SEAL_AUTH" targetRef="CATEGORYID_SEAL_USE"/>
        <sequenceFlow sourceRef="CATEGORYID_SEAL_USE" targetRef="complete"/>
    </process>
</definitions>